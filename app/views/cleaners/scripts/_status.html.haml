:javascript
  KC.status = {
    timer: null,
    update: function() {
      $.ajax({
        url: '#{status_cleaner_path}', type: 'GET', dataType: 'json',
        success: function(data, status, xhr) { KC.status.draw(data); }
      });
    },
    draw: function(data) {
      if (data['job']['current_state'] == 'processing') {
        // 処理開始待ち
        if (data['progression']['current_state'] == 'created') {
          $('#bar').width('0%');
          $('#indicator').html('処理が開始されるのを待っています...');
        }

        // ツイート取得中
        if (data['progression']['current_state'] == 'collecting' || data['progression']['current_state'] == 'collected') {
          $('#bar').width('0%');
          $('#indicator').html('ツイート取得中...');
        }

        // ツイートフィルタ中
        if (data['progression']['current_state'] == 'filtering' || data['progression']['current_state'] == 'filtered') {
          $('#bar').width('0%');
          $('#indicator').html('ツイート取得中...');
        }

        // ツイート削除中
        if (data['progression']['current_state'] == 'destroying') {
          $('#bar').width((100 * data['progression']['destroyed_count'] / data['progression']['statuses_count'])+'%');
          $('#indicator').html(data['progression']['destroyed_count'] + ' / ' + data['progression']['statuses_count']);
        }
      }
      else if (data['job']['current_state'] == 'confirming') {
        // 完了
        clearInterval(KC.status.timer);
        $('#btn-abort').attr('disabled', 'disabled');
        $('#btn-abort').attr('href', 'javascript:void(0);');
        $('#btn-confirm').removeAttr('disabled');
        $('#btn-confirm').off('click');
        $('#bar').width((100 * data['progression']['destroyed_count'] / data['progression']['statuses_count'])+'%');
        $('#indicator').html('完了!');
      }
    },
  };

:javascript
  $(document).on('ready', function() {
    KC.status.update();
    KC.status.timer = setInterval(function() {
      KC.status.update();
    }, 8000);
  });
